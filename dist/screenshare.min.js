/**
 * SkyWay-Screenshare-Library - Screenshare Library for SkyWay
 * @version v1.0.0
 * @author NTT Communications(skyway@ntt.com)
 * @link https://github.com/nttcom/SkyWay-ScreenShare
 * @license MIT License
 */
var SkyWay;!function(e){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;var t=function(){function e(e){"undefined"==typeof e&&(e=null),this._debug=!1,"debug"in e&&(this._debug=e.debug)}return e.prototype.startScreenShare=function(e,t,i,a){var o=this;if("undefined"==typeof a&&(a=null),navigator.mozGetUserMedia){var n={video:{mozMediaSource:"window",mediaSource:"window"},audio:!1};isFinite(e.Width)&&(n.video.width={min:e.Width,max:e.Width}),isFinite(e.Height)&&(n.video.height={min:e.Height,max:e.Height}),isFinite(e.FrameRate)&&(n.video.frameRate={min:e.FrameRate,max:e.FrameRate}),this.logger(n),navigator.mozGetUserMedia(n,function(e){o.logger(e),t(e)},function(e){o.logger(e),i(e)})}else if(navigator.webkitGetUserMedia){var r={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:""},optional:[{googTemporalLayeredScreencast:!0},{googLeakyBucket:!0}]};isFinite(e.Width)&&(r.mandatory.maxWidth=e.Width,r.mandatory.minWidth=e.Width),isFinite(e.Height)&&(r.mandatory.maxHeight=e.Height,r.mandatory.minHeight=e.Height),isFinite(e.FrameRate)&&(r.mandatory.maxFrameRate=e.FrameRate,r.mandatory.minFrameRate=e.FrameRate),window.addEventListener("message",function(e){o.logger(e.data.type),"gotStreamId"==e.data.type&&(r.mandatory.chromeMediaSourceId=e.data.streamid,o.logger(r),navigator.getUserMedia({audio:!1,video:r},function(e){e.onended=function(e){o.logger(e),"undefined"!=typeof a&&a()},o.logger(e),t(e)},function(e){o.logger(e),i(e)}))}),window.postMessage({type:"getStreamId"},"*")}},e.prototype.stopScreenShare=function(){return!1},e.prototype.isEnabledExtension=function(){return this.logger(window.ScreenShareExtentionExists),"boolean"==typeof window.ScreenShareExtentionExists?!0:!1},e.prototype.logger=function(e){this._debug&&console.log("ScreenShare: "+e)},e}();e.ScreenShare=t}(SkyWay||(SkyWay={}));